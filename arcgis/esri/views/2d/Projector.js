// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.1/esri/copyright.txt for details.
//>>built
define(["../../core/Accessoire","../../geometry/Polyline"],function(r,s){var p=function(a,b){var c=a.length,l=a[0],m=a[c-1],g=0,d=0,h,k;for(h=1;h<c-1;h++){k=a[h];var e=l,n=m,f=void 0,q=void 0,f=void 0;e[0]===n[0]?f=Math.abs(k[0]-e[0]):(f=(n[1]-e[1])/(n[0]-e[0]),q=e[1]-f*e[0],f=Math.abs(f*k[0]-k[1]+q)/Math.sqrt(f*f+1));k=f;k>g&&(d=h,g=k)}g>b?(c=p(a.slice(0,d+1),b),d=p(a.slice(d),b),d=c.concat(d)):d=[l,m];return d};return r.createSubclass({_transformSetter:function(a){this._transformers=[];return a},
toScreenPoint:function(a,b,c){b=this.getTransformer(b);c||(c={x:0,y:0});b.transformPoint(a.x,a.y,function(a,b){c.x=a;c.y=b});return c},toScreenPath:function(a,b){var c=a instanceof s,l=c?a.paths:a.rings,m=this.getTransformer(b),g=[],d,h,k=function(a,b){g.push(a+","+b)};if(l){d=0;for(h=l.length;d<h;d++)g.push("M"),m.forEach(p(l[d],this.resolution),k),c||g.push("Z")}return g},getTransformer:function(a){if(!this._transformers[a]){var b=this.transform,c=b[0],l=b[1],m=b[2],g=b[3],d=b[4]+a,h=b[5],k=0!==
l&&0!==m,e,n,f=Math.round;this._transformers[a]={transformPoint:function(){return k?function(a,b,e){e(f(c*a+m*b+d),f(l*a+g*b+h))}:function(a,b,e){e(f(c*a+d),f(g*b+h))}}(),forEach:function(a,b){e=0;for(n=a.length;e<n;e++)this.transformPoint(a[e][0],a[e][1],b)}}}return this._transformers[a]}})});