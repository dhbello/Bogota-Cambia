// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.1/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../geometry/SpatialReference ../../geometry/Point ./LOD".split(" "),function(u,v,m,b,n,d,p,q,r,s,h,t){var k=q({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",
MIXED:"mixed",LERC:"lerc"});return function(l){function a(c){l.call(this);this.dpi=96;this.origin=this.format=null;this.maxScale=this.minScale=0;this.spatialReference=this.size=null}m(a,l);Object.defineProperty(a.prototype,"lods",{set:function(c){var f=0,a=0,e=[];c&&(f=-Infinity,a=Infinity,c.forEach(function(c){e.push(c.scale);f=c.scale>f?c.scale:f;a=c.scale<a?c.scale:a},this));this._set("scales",e);this._set("minScale",f);this._set("maxScale",a);this._set("lods",c)},enumerable:!0,configurable:!0});
a.prototype.zoomToScale=function(c){var a=this.scales;if(0>=c)return a[0];if(c>=a.length)return a[a.length-1];var d=Math.round(c-0.5),e=Math.round(c);return a[e]+(e-c)*(a[d]-a[e])};a.prototype.scaleToZoom=function(c){for(var a=this.scales,d=a.length-1,e=0;e<d;e++){var b=a[e],g=a[e+1];if(b<=c)break;if(g===c)return e+1;if(b>c&&g<c)return e+1-(c-g)/(b-g)}return e};a.prototype.snapScale=function(a,d){void 0===d&&(d=0.95);var b=this.scaleToZoom(a);return b%Math.floor(b)>=d?this.zoomToScale(Math.ceil(b)):
this.zoomToScale(Math.floor(b))};a.prototype.clone=function(){return a.fromJSON(this.toJSON())};a.prototype.toJSON=function(){return r.fixJson({rows:this.size[0],cols:this.size[1],dpi:this.dpi,format:k.toJSON(this.format),compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJSON(),spatialReference:this.spatialReference&&this.spatialReference.toJSON(),lods:this.lods&&this.lods.map(function(a){return a.toJSON()})})};b([d.property()],a.prototype,"compressionQuality",void 0);b([d.property()],
a.prototype,"dpi",void 0);b([d.property({json:{read:k.fromJSON}})],a.prototype,"format",void 0);b([d.property({type:h,json:{read:function(a,b){return h.fromJSON(n.mixin({spatialReference:b.spatialReference},a))}}})],a.prototype,"origin",void 0);b([d.property({type:[t],value:null})],a.prototype,"lods",null);b([d.property({readOnly:!0})],a.prototype,"minScale",void 0);b([d.property({readOnly:!0})],a.prototype,"maxScale",void 0);b([d.property({readOnly:!0})],a.prototype,"scales",void 0);b([d.property({cast:function(a){return Array.isArray(a)?
a:"number"===typeof a?[a,a]:[256,256]},json:{readFrom:["rows","cols"],read:function(a,b){return[b.cols,b.rows]}}})],a.prototype,"size",void 0);b([d.property({type:s})],a.prototype,"spatialReference",void 0);return a=b([d.subclass("esri.layers.support.TileInfo")],a)}(d.declared(p))});